<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>De texto a vectores (parte 1)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />
    <!-- <link rel="stylesheet" type="text/css" href="/assets/built/prism.css" /> -->
    <!-- highlight.js -->
    <!-- <link rel="stylesheet" href="/assets/built/styles/default.css"> -->
    <style>.hljs { background: none; }</style>
    <!-- night owl style  -->
    <link rel="stylesheet" href="/assets/built/styles/night-owl.css" />
    <style type='text/css'>
        pre, code {
            white-space: pre-wrap;
            overflow-x: scroll;
        }
        .hljs {
            display: inline-block;
            overflow-x: scroll;
            min-width: 100%;
        }
        .highlight {
            min-width: 100%;
        }
        div[class^="language-"] {
            min-width: 100%;
        }
    </style>

    

    
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    



    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Tu sitio para aprender de visualizaci√≥n y ciencia de datos en espa√±ol. Consejos, recursos y mejores pr√°cticas para tus proyectos de tecnolog√≠a, periodismo de datos y an√°lisis estad√≠sticos." />
    <link rel="shortcut icon" href="https://old.tacosdedatos.com/assets/icons/favicon.ico" type="image/png" />
    <link rel="canonical" href="https://old.tacosdedatos.com/texto-vectores" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="De texto a vectores (parte 1)" />
    <meta property="og:description" content="Tener nuestro texto convertido en tokens es un paso importante en el uso de texto para aplicaciones de machine learning, existe una transformaci√≥n que debemos realizar para facilitarle la tarea a nuestros modelos. Esta transformaci√≥n es conocida como vectorizaci√≥n. En el post pasado nos quedamos con nuestro texto ya tokenizado," />
    <meta property="og:url" content="https://old.tacosdedatos.com/texto-vectores" />
    <meta property="og:image" content="https://old.tacosdedatos.com/assets/detrasdelavis/004.png" />
    <meta property="article:publisher" content="https://www.facebook.com/tacosdedatos" />
    <meta property="article:author" content="https://www.facebook.com/tacosdedatos" />
    <meta property="article:published_time" content="2020-08-24T10:00:00+00:00" />
    <meta property="article:modified_time" content="2020-08-24T10:00:00+00:00" />
    <meta property="article:tag" content="Python" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="De texto a vectores (parte 1)" />
    <meta name="twitter:description" content="Tener nuestro texto convertido en tokens es un paso importante en el uso de texto para aplicaciones de machine learning, existe una transformaci√≥n que debemos realizar para facilitarle la tarea a nuestros modelos. Esta transformaci√≥n es conocida como vectorizaci√≥n. En el post pasado nos quedamos con nuestro texto ya tokenizado," />
    <meta name="twitter:url" content="https://old.tacosdedatos.com/" />
    <meta name="twitter:image" content="https://old.tacosdedatos.com/assets/detrasdelavis/004.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol." />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Python" />
    <meta name="twitter:site" content="@tacosdedatos" />
    <meta name="twitter:creator" content="@tacosdedatos" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol.",
        "logo": "https://old.tacosdedatos.com/assets/images/alt-blog-icon.png"
    },
    "url": "https://old.tacosdedatos.com/texto-vectores",
    "image": {
        "@type": "ImageObject",
        "url": "https://old.tacosdedatos.com/assets/detrasdelavis/004.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://old.tacosdedatos.com/texto-vectores"
    },
    "description": "Tener nuestro texto convertido en tokens es un paso importante en el uso de texto para aplicaciones de machine learning, existe una transformaci√≥n que debemos realizar para facilitarle la tarea a nuestros modelos. Esta transformaci√≥n es conocida como vectorizaci√≥n. En el post pasado nos quedamos con nuestro texto ya tokenizado,"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="De texto a vectores (parte 1)" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://old.tacosdedatos.com/"><img src="/assets/images/alt-blog-icon.png" alt="üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol." /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">inicio</a></li>
    <li class="nav-home" role="menuitem"><a href="https://medium.com/tacosdedatos/">la publiqueishon (Medium)</a></li>
    <li class="nav-about" role="menuitem"><a href="/sobre/">sobre üåÆ</a></li>
    <li class="nav-podcast" role="menuitem"><a href="https://tacosdedatos.fm">podcast üåÆüéß</a></li>
    <li class="nav-recursos" role="menuitem"><a href="http://boletin.tacosdedatos.com/">el bolet√≠n</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-fb" href="https://facebook.com/tacosdedatos" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/tacosdedatos" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscr√≠bete</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-tutoriales ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="24 August 2020">24 August 2020</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/python/'>PYTHON</a>,
                            
                        
                            
                               <a href='/tag/skelarn/'>SKELARN</a>,
                            
                        
                            
                               <a href='/tag/texto/'>TEXTO</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">De texto a vectores (parte 1)</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/detrasdelavis/004.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>Tener nuestro texto convertido en tokens es un paso importante en el uso de texto para aplicaciones de machine learning, existe una transformaci√≥n que debemos realizar para facilitarle la tarea a nuestros modelos. Esta transformaci√≥n es conocida como vectorizaci√≥n.</p>

<p>En el <a href="https://tacosdedatos.com/analisis-texto">post pasado</a> nos quedamos con nuestro texto ya tokenizado, sin embargo los modelos de machine learning operan con valores num√©ricos organizados en arreglos llamados vectores, y hasta el momento nuestros tokens son solo secuencias de caracteres. Nuestra tarea, y de lo que les voy a hablar en el siguiente post, es convertir esta secuencias a vectores.</p>

<h2 id="un-poco-de-nomenclatura">Un poco de nomenclatura</h2>
<p>Cuando se habla de texto en el contexto de la ciencia de datos hay algunas palabras que debemos entender ya que son com√∫nmente usadas:</p>

<ul>
  <li><strong>Token</strong>, conjunto de caracteres que representa la m√≠nima unidad en el an√°lisis de texto.</li>
  <li><strong>Documento</strong>, la representaci√≥n escrita de una idea, concepto o di√°logo, un documento est√° compuesto por varios tokens. Como ejemplos de documentos podemos tener un <em>tweet</em>, un di√°logo en una pel√≠cula o un <em>paper</em> de una publicaci√≥n cient√≠fica.</li>
  <li><strong>Corpus</strong>, todo el conjunto de documentos sobre el que estamos realizando el an√°lisis.</li>
  <li><strong>Vocabulario</strong>, el conjunto de tokens √∫nicos que obtenemos como resultado al tokenizar nuestro <em>corpus</em> completo.</li>
</ul>

<p>Por ejemplo, debajo tenemos tres documentos, que en conjunto forman nuestro corpus.</p>

<blockquote>
  <p>Fui a comer tacos de suadero. Juro que es el suadero m√°s delicioso de mi vida. #suadero</p>
</blockquote>

<blockquote>
  <p>Taco de delicioso suadero con bolsa de pl√°stico para que no ensucie el plato.</p>
</blockquote>

<blockquote>
  <p>Tengo ganas de comprarme unos tacos de f√∫tbol, ir a la cancha y jugar hasta la noche</p>
</blockquote>

<p>Luego, una vez tokenizado con la funci√≥n que desarrollamos en el post anterior, nos queda el siguiente vocabulario: <strong>bolsa</strong>, <strong>cancha</strong>, <strong>comer</strong>, <strong>comprarme</strong>, <strong>delicioso</strong>, <strong>ensuciar</strong>, <strong>f√∫tbol</strong>, <strong>ganar</strong>, <strong>jugar</strong>, <strong>juro</strong>, <strong>noche</strong>, <strong>plato</strong>, <strong>pl√°stico</strong>, <strong>suadero</strong>, <strong>taco</strong> y <strong>vida</strong>.</p>

<p>Como referencia, aqu√≠ est√° la funci√≥n tokenizadora que llamamos <code class="language-plaintext highlighter-rouge">tokenize_phrase</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">tokenize_phrase</span><span class="p">(</span><span class="n">phrase</span><span class="p">):</span>
    <span class="n">parsed_phrase</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">phrase</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">parsed_phrase</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span><span class="p">.</span><span class="n">is_punct</span> <span class="ow">or</span> <span class="n">token</span><span class="p">.</span><span class="n">is_stop</span> <span class="ow">or</span> <span class="n">token</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">spanish_stopwords</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">yield</span> <span class="n">token</span><span class="p">.</span><span class="n">lemma_</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></div>

<blockquote>
  <p><strong>SciKit-Learn</strong>: Si no est√°s familiarizado con la interfaz de SciKit-Learn te invito a <a href="https://www.youtube.com/watch?v=XgXPxrEg0rA">ver mi video sobre el tema</a>. En resumen, <em>SciKit-Learn</em> tiene unas clases que se conocen como <em>transformers</em>, estos, como el nombre nos indica, son usados para transformar datos entre dos dominios. Los transformadores que vamos a usar poseen dos m√©todos que estamos usando: <code class="language-plaintext highlighter-rouge">fit</code>, que nos ayuda preparar nuestro vectorizador, <code class="language-plaintext highlighter-rouge">transform</code> que nos ayuda a convertir nuestros datos a vectores.</p>
</blockquote>

<h2 id="bolsa-de-palabras-bag-of-words">Bolsa de palabras (<em>Bag of words</em>)</h2>
<p>Una de las primeras ideas que se nos puede venir a la mente es la de generar una peque√±a tabla, en donde cada documento es un rengl√≥n y cada token es una columna:</p>

<p><img src="assets/detrasdelavis/004_empty.png" alt="" /></p>

<blockquote>
  <p><strong><code class="language-plaintext highlighter-rouge">CountVectorizer</code> y <code class="language-plaintext highlighter-rouge">analyzer</code></strong>: Al especificar el argumento <code class="language-plaintext highlighter-rouge">analyzer</code> y asignarlo a nuestra funci√≥n para tokenizar (<code class="language-plaintext highlighter-rouge">tokenize_phrase</code>) le estamos indicando a nuestro transformador que cuando sea el momento de tokenizar nuestros documentos, use esa funci√≥n en lugar del tokenizador por default que viene en <code class="language-plaintext highlighter-rouge">sklearn</code>.</p>
</blockquote>

<h3 id="vectores-de-frecuencia">Vectores de frecuencia</h3>
<p>Para rellenar la tabla anterior tenemos varias opciones, por ejemplo, podr√≠amos simplemente la cantidad de veces que un determinado token aparece en cada uno de los documentos:</p>

<p><img src="assets/detrasdelavis/004_frequency.png" alt="" /></p>

<p>Como, en nuestro caso, la palabra ‚Äúsuadero‚Äù aparece tres veces en el primer documento.</p>

<p>Para lograr esto, vamos a hacer uso de <em>SciKit-Learn</em>, que si bien no es un framework dedicado a trabajar con texto, tiene bastantes utilidades que nos permiten hacerlo de manera sencilla y reproducible.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="n">frequency_vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">analyzer</span><span class="o">=</span><span class="n">tokenize_phrase</span><span class="p">)</span>

<span class="n">frequency_vectorizer</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
<span class="n">frequency_vectors</span> <span class="o">=</span> <span class="n">frequency_vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="one-hot-encoding-bag-of-words">One-hot-encoding (<em>Bag of words</em>)</h3>
<p>Otra opci√≥n que tenemos, si es que solamente queremos saber si una palabra existe en un documento o no, es la de usar la codificaci√≥n <em>one-hot</em>, que simplemente consiste en colocar verdadero o falso (<code class="language-plaintext highlighter-rouge">1</code> o <code class="language-plaintext highlighter-rouge">0</code>) dependiendo de si la palabra existe o no:</p>

<p><img src="assets/detrasdelavis/004_onehot.png" alt="" /></p>

<p>Como, en nuestro caso, a pesar de que la palabra ‚Äúsuadero‚Äù aparece tres veces en el primer documento, solamente hay un uno en la columna correspondiente. Para lograr esto con Python, el siguiente c√≥digo es √∫til:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="n">one_hot_vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">analyzer</span><span class="o">=</span><span class="n">tokenize_phrase</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">one_hot_vectorizer</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
<span class="n">one_hot_vectors</span> <span class="o">=</span> <span class="n">one_hot_vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p><strong><code class="language-plaintext highlighter-rouge">CountVectorizer</code> y <code class="language-plaintext highlighter-rouge">binary</code></strong>: A pesar de usar la misma clase <code class="language-plaintext highlighter-rouge">CountVectorizer</code>, el especificar el argumento <code class="language-plaintext highlighter-rouge">binary = True</code> le indica a nuestro <em>transformer</em> que simplemente queremos saber si un token existe en un documento, no cu√°ntas veces aparece.</p>
</blockquote>

<h3 id="tf-idf">TF-IDF</h3>
<p>Tanto el vector de frecuencias como el binario tratan cada documento de manera individual. Lo cual es bueno hasta cierto punto, sin embargo, existe una transformaci√≥n que toma en cuenta la influencia de todo el <em>corpus</em> en cada documento.</p>

<p>La idea detr√°s del famoso TF-IDF (Term Frequency ‚Äì Inverse Document Frequency), o por su nombre en espa√±ol: <em>frecuencia de t√©rmino ‚Äì frecuencia inversa de documento</em>, El valor de cada token aumenta proporcionalmente al n√∫mero de veces que una palabra aparece en el documento, pero es compensada por la frecuencia de la palabra en la colecci√≥n de documentos, lo que permite manejar el hecho de que algunas palabras son generalmente m√°s comunes que otras.</p>

<h3 id="detalles-matem√°ticos">Detalles matem√°ticos‚Ä¶</h3>

<p>Existen diversas maneras de calcular este n√∫mero <a href="https://es.wikipedia.org/wiki/Tf-idf#Detalles_matem%C3%A1ticos">la wikipedia lista varias</a>, pero esta es una de las m√°s comunes:</p>

<p>Partiendo de que</p>
<ul>
  <li>\(t\) es el token para el cual estamos calculando,</li>
  <li>\(d\) es el documento de inter√©s y</li>
  <li>\(D\) es nuestro corpus</li>
</ul>

<p>Obtenemos el valor de acuerdo a la siguiente formula</p>

\[tfidf(t, d, D) = \color{blue}{tf(t, d)} \times \color{red}{idf(t, D)}\]

<ul>
  <li>
    <p>\(\color{blue}{tf(t, d) = f_{t,d}}\) es la cantidad de veces que el token \(t\) aparece en el documento \(d\).</p>
  </li>
  <li>
    <p>\(\color{red}{idf(t, D) = \ln{\frac{\vert D \vert + 1}{\vert\{d \in D: t \in d\}\vert + 1} + 1}}\) en donde \(\vert D \vert\) es la cantidad de documentos en nuestro corpus y \(\vert \{d \in D: t \in d\} \vert\) es la cantidad de documentos en la que aparece el token \(t\). Los \(+ 1\) que se encuentran ah√≠ son conocidos como ‚Äúsuavizado‚Äù que nos ayudan a evitar divisiones entre \(0\).</p>
  </li>
</ul>

<p>Toma por ejemplo, el token <em>suadero</em> en el primer documento (denotado como \(documentos_1\)):</p>

\[tfidf(‚Äúsuadero‚Äù, documentos_1, corpus) = \color{blue}{tf(‚Äúsuadero‚Äù, documentos_1)} \times \color{red}{idf(‚Äúsuadero‚Äù, corpus)}\]

\[tfidf(‚Äúsuadero‚Äù, documentos_1, corpus) = \color{blue}{3} \times \color{red}{\ln{\frac{3 + 1}{2 + 1} + 1}}\]

\[tfidf(‚Äúsuadero‚Äù, documentos_1, corpus) = \color{blue}{3} \times \color{red}{\ln{\frac{4}{3}+1}}\]

\[tfidf(‚Äúsuadero‚Äù, documentos_1, corpus) = \color{blue}{3} \times \color{red}{\ln{2.333}}\]

\[tfidf(‚Äúsuadero‚Äù, documentos_1, corpus) = 3.8630\]

<p>Como se puede observar en la siguiente tabla:</p>

<p><img src="assets/detrasdelavis/004_tfidf_no_norm.png" alt="" /></p>

<p>Usualmente los algoritmos lineares de <em>machine learning</em> otorgan mejores resultados cuando nuestras variables de entrada est√°n normalizadas, as√≠ que se recomienda que nosotros hagamos lo mismo.</p>

<p>Para nuestra suerte, dentro de <code class="language-plaintext highlighter-rouge">sklearn</code> tambi√©n existe un <em>transformer</em> que nos permite convertir nuestros vectores a TF-IDF (incluyendo la parta de la normalizaci√≥n):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>

<span class="n">tfidf_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">analyzer</span><span class="o">=</span><span class="n">tokenize_phrase</span><span class="p">)</span>

<span class="n">tfidf_vectorizer</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
<span class="n">tfidf_vectors</span> <span class="o">=</span> <span class="n">tfidf_vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
</code></pre></div></div>

<p>Que nos dar√° como resultado una matriz m√°s o menos as√≠:</p>

<p><img src="assets/detrasdelavis/004_tfidf.png" alt="" /></p>

<h2 id="sobre-las-representaciones-vectoriales">Sobre las representaciones vectoriales‚Ä¶</h2>

<h3 id="representaciones-dispersas">Representaciones dispersas</h3>
<p>Si de algo nos dimos cuenta con las matrices anteriores, es que en muchas ocasiones, tenemos m√°s <code class="language-plaintext highlighter-rouge">0</code> (valores en blanco) que valores reales. En otras palabras, nuestros documentos-vectores son dispersos, o en ingles <em>sparse vectors</em>. Esto podr√≠a llegar a ser un problema cuando tenemos un vocabulario de tama√±o considerable.</p>

<h3 id="no-reflejan-el-orden-de-los-t√©rminos">No reflejan el orden de los t√©rminos</h3>
<p>Otra cosa a considerar es que con solo ver la representaci√≥n vectorizada de determinado documento, no podemos reconstruir el documento original, de entrada por todo el proceso de tokenizaci√≥n, pero tambi√©n porque <strong>ninguna de las t√©cnicas que vimos, preserva el orden original de los tokens en el documento</strong>.</p>

<h3 id="existen-todav√≠a-m√°s-opciones">Existen todav√≠a m√°s opciones</h3>
<p>Si bien estas representaciones son buenas u √∫tiles, hay casos en los que necesitamos obtener m√°s detalle de nuestros documentos, para esos casos podemos usar t√©cnicas como <a href="http://jalammar.github.io/illustrated-word2vec/">Word2vec</a> o <a href="https://medium.com/wisio/a-gentle-introduction-to-doc2vec-db3e8c0cce5e">Doc2vec</a>, de las cuales espero escribir en un post futuro.</p>

<h3 id="guarda-tus-vectorizadores">Guarda tus vectorizadores</h3>
<p>Sin importar qu√© m√©todo de transformaci√≥n usaste, siempre debes usar el mismo para transformaciones subsecuentes. Por ejemplo, si usaste <code class="language-plaintext highlighter-rouge">fit</code> con un transformador para los datos de entrenamiento de un algoritmo de clasificaci√≥n, debes usar el mismo transformador (ya entrenado) para obtener los vectores al momento de realizar predicciones en nuevos datos.</p>

<p>Mientras tanto, te invito a que me en Twitter en <a href="https://twitter.com/io_exception">@io_exception</a>, por all√° podemos conversar sobre el tema.</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscr√≠bete a üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol.</h3>
                    <p>Recibe las mejores publicaciones directamente a tu caja de entrada</p>
                    <div id="revue-embed">
  <form
    action="http://boletin.tacosdedatos.com/add_subscriber"
    method="post"
    id="revue-form"
    name="revue-form"
    target="_blank"
  >
    <div class="revue-form-group">
      <div>
        <label for="member_email">Correo electr√≥nico</label>
        <input
          class="revue-form-field"
          placeholder="Tu correo electr√≥nico"
          type="email"
          name="member[email]"
          id="member_email"
        />
      </div>
      <div class="revue-form-group">
        <label for="member_first_name"
          >Nombre <span class="optional">(Opcional)</span></label
        >
        <input
          class="revue-form-field"
          placeholder="Nombre (opcional)"
          type="text"
          name="member[first_name]"
          id="member_first_name"
        />
      </div>
      <div class="revue-form-group">
        <label for="member_last_name"
          >Apellidos <span class="optional">(Opcional)</span></label
        >
        <input
          class="revue-form-field"
          placeholder="Apellidos (opcional)"
          type="text"
          name="member[last_name]"
          id="member_last_name"
        />
      </div>
      <div class="revue-form-actions">
        <input
          type="submit"
          value="Subscribe"
          name="member[subscribe]"
          id="member_submit"
        />
      </div>
    </div>
    <div class="revue-form-footer">
      Al registrarte declaras aceptar los
      <a target="_blank" href="https://www.getrevue.co/terms"
        >t√©rminos y condiciones de uso</a
      >
      y la
      <a target="_blank" href="https://www.getrevue.co/privacy"
        >pol√≠tica de privacidad</a
      >
      de Revue.
    </div>
  </form>
</div>

                </section>
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/yo_io_exception.jpg" alt="io_exception" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/io_exception">Antonio Feregrino Bola√±os</a></h4>
                                
                                    <p>Soy cient√≠fico de datos pero crec√≠ siendo desarrollador de software.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/io_exception">Lee M√°s</a>
                        </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://old.tacosdedatos.com/texto-vectores';
                            this.page.identifier = 'De texto a vectores (parte 1)';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://tacosdedatos.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol. &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/python/">Python</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/mejorando-barplots">Mejorando nuestros gr√°ficos de barras</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/word-to-vec-ilustrado">Word2vec ilustrado</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/analisis-texto">Introducci√≥n al an√°lisis de texto</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/python/">
                                
                                    See all 15 posts  ‚Üí
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/word-to-vec-ilustrado">
                <div class="post-card-image" style="background-image: url(/assets/detrasdelavis/005.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/word-to-vec-ilustrado">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Python</span>
                            
                        
                            
                               <span class="post-card-tags">Skelarn</span>
                            
                        
                            
                               <span class="post-card-tags">Texto</span>
                            
                        
                            
                                <span class="post-card-tags">Word2vec</span>
                            
                        
                    

                    <h2 class="post-card-title">Word2vec ilustrado</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/yo_io_exception.jpg" alt="Antonio Feregrino Bola√±os" />
                        
                        <span class="post-card-author">
                            <a href="/author/io_exception/">Antonio Feregrino Bola√±os</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/analisis-texto">
                <div class="post-card-image" style="background-image: url(/assets/detrasdelavis/003.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/analisis-texto">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Python</span>
                            
                        
                            
                               <span class="post-card-tags">Spacy</span>
                            
                        
                            
                                <span class="post-card-tags">Texto</span>
                            
                        
                    

                    <h2 class="post-card-title">Introducci√≥n al an√°lisis de texto</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/yo_io_exception.jpg" alt="Antonio Feregrino Bola√±os" />
                        
                        <span class="post-card-author">
                            <a href="/author/io_exception/">Antonio Feregrino Bola√±os</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://old.tacosdedatos.com/">
            
                <img src="/assets/icons/favicon.ico" alt="üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol. icon" />
            
            <span>üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol.</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">De texto a vectores (parte 1)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">comparte esto <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=De+texto+a+vectores+%28parte+1%29&amp;url=https://old.tacosdedatos.com/texto-vectores"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://old.tacosdedatos.com/texto-vectores"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://old.tacosdedatos.com/">üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol.</a> &copy; 2021</section>
                <section class="poweredby">Publicado con <a href="https://jekyllrb.com/">Jekyll</a>, c√≥digo abierto en 
                    <a href="https://github.com/tacosdedatos/website" target="_blank" rel="noopener">GitHub</a> usando
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">lo <b>+</b> nuevo</a>
                    <a href="https://tacosdedatos.com/etiquetas" target="_blank" rel="noopener">etiquetas</a>
                    <!-- <a href="https://facebook.com/tacosdedatos" target="_blank" rel="noopener">Facebook</a> -->
                    <!-- <a href="https://twitter.com/tacosdedatos" target="_blank" rel="noopener">Twitter</a> -->
                    <a href="https://instagram.com/chekos.visuals" target="_blank" rel="noopener">instagram</a>
                    
                    <a href="https://join.slack.com/t/tacosdedatos/shared_invite/enQtNTQyOTE3NzE5NDE1LTA2MWZhMGE3NzNhYTA0Yjc1Yjk0NTZjNzM4M2VjOGIzOTA4YTc2ZjlkYjIyODRmYjA0MjVlMjExNjRjYWQ0NDQ" target="_blank" rel="noopener">slack</a>
                    <a href="https://patreon.com/tacosdedatos/" target="_blank" rel="noopener">patreon</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                    <img class="subscribe-overlay-logo" src="/assets/images/alt-blog-icon.png" alt="üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol." />
                
                <h1 class="subscribe-overlay-title">Subscr√≠bete a üåÆ tacos de datos | Aprende visualizaci√≥n de datos en espa√±ol.</h1>
                <p class="subscribe-overlay-description">¬°Mantente al tanto! Recibe las mejores publicaciones directamente a tu caja de entrada.</p>
                <div id="revue-embed">
  <form
    action="http://boletin.tacosdedatos.com/add_subscriber"
    method="post"
    id="revue-form"
    name="revue-form"
    target="_blank"
  >
    <div class="revue-form-group">
      <div>
        <label for="member_email">Correo electr√≥nico</label>
        <input
          class="revue-form-field"
          placeholder="Tu correo electr√≥nico"
          type="email"
          name="member[email]"
          id="member_email"
        />
      </div>
      <div class="revue-form-group">
        <label for="member_first_name"
          >Nombre <span class="optional">(Opcional)</span></label
        >
        <input
          class="revue-form-field"
          placeholder="Nombre (opcional)"
          type="text"
          name="member[first_name]"
          id="member_first_name"
        />
      </div>
      <div class="revue-form-group">
        <label for="member_last_name"
          >Apellidos <span class="optional">(Opcional)</span></label
        >
        <input
          class="revue-form-field"
          placeholder="Apellidos (opcional)"
          type="text"
          name="member[last_name]"
          id="member_last_name"
        />
      </div>
      <div class="revue-form-actions">
        <input
          type="submit"
          value="Subscribe"
          name="member[subscribe]"
          id="member_submit"
        />
      </div>
    </div>
    <div class="revue-form-footer">
      Al registrarte declaras aceptar los
      <a target="_blank" href="https://www.getrevue.co/terms"
        >t√©rminos y condiciones de uso</a
      >
      y la
      <a target="_blank" href="https://www.getrevue.co/privacy"
        >pol√≠tica de privacidad</a
      >
      de Revue.
    </div>
  </form>
</div>

            </div>
        </div>
    

    <!-- highlight.js -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script> -->
    <script src="/assets/js/highlight.pack.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightBlock(block);
        });
    });
    </script>
    <!-- prism.js -->
    <!-- <script type="text/javascript" src="/assets/js/prism.js"></script> -->
    

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>

    <!-- <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script> -->


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133541532-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
